{% extends 'base.html.twig' %}

{% block title %}Show Topic details{% endblock %}

{% block body %}
<style>
  .example-wrapper {
    margin: 1em auto;
    max-width: 800px;
    width: 95%;
    font: 18px/1.5 sans-serif;
  }

  .example-wrapper code {
    background: #F5F5F5;
    padding: 2px 6px;
  }
</style>
<a href="{{path('show_categorie',{'id':topic.categorie.id})}}">Revenir aux topics</a>
<h1>{{topic}}</h1>
<p>Statut :
  {% if not topic.verouille and not topic.resolu%}
  non résolu

  {% else %}

  {% if topic.verouille %}
  vérouillé
  {% endif %}

  {% if topic.resolu %}
  résolu
  {% endif %}
</p>
  {% endif %}
<div class="example-wrapper">
  {% for post in topic.posts %}
  <ul>
    <li>{{post}}</li>
    {% if app.user and app.user.id==topic.auteur.id %}
    <p>{{post.datePublication | date("d/m/Y à G:i:s")}}</p>
    <p><a href="{{path('edit_post', {'id':post.id})}}">edit</a>/<a
        href="{{path('delete_post', {'id':post.id})}}">delete</a></p>
    {% endif %}
  </ul>
  {% endfor %}
  {% if(app.user) %}
  <h2>Créer un nouveau Post</h2>
  <form method="POST" action="{{path('add_post',{'id':topic.id})}}">
    <p>
      <label for="post">Nouveau Post</label>
      <textarea type="text" name="post" id="post" required></textarea>
    </p>
    <input type="submit" name="submit">
  </form>
  {% endif %}
</div>
{% endblock %}